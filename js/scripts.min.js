(function(c){function g(a,e){this.settings=c.extend({},k,e);this.modal=a;this.buildDOM();this.addEventListeners();this.index=c[b].lookup.push(this)-1;this.busy=!1}var b="remodal",k={hashTracking:!0};c[b]={lookup:[]};var d,f=function(a){var b=a.css("transition-duration")||a.css("-webkit-transition-duration")||a.css("-moz-transition-duration")||a.css("-o-transition-duration")||a.css("-ms-transition-duration")||0;a=a.css("transition-delay")||a.css("-webkit-transition-delay")||a.css("-moz-transition-delay")|| a.css("-o-transition-delay")||a.css("-ms-transition-delay")||0;return 1E3*(parseFloat(b)+parseFloat(a))},h=function(){var a=document.createElement("div");a.style.visibility="hidden";a.style.width="100px";document.body.appendChild(a);var b=a.offsetWidth;a.style.overflow="scroll";var c=document.createElement("div");c.style.width="100%";a.appendChild(c);c=c.offsetWidth;a.parentNode.removeChild(a);return b-c};g.prototype.buildDOM=function(){this.body=c(document.body);this.bg=c("."+b+"-bg");this.modalClose= c("<a href='#'>").addClass(b+"-close");this.overlay=c("<div>").addClass(b+"-overlay");this.modal.hasClass(b)||this.modal.addClass(b);this.modal.css("visibility","visible");this.modal.append(this.modalClose);this.overlay.append(this.modal);this.body.append(this.overlay);this.confirm=this.modal.find("."+b+"-confirm");this.cancel=this.modal.find("."+b+"-cancel");var a=f(this.overlay),e=f(this.modal),d=f(this.bg);this.td=e>a?e:a;this.td=d>this.td?d:this.td};g.prototype.addEventListeners=function(){this.modalClose.bind("click."+ b,function(a){a.preventDefault();this.close()}.bind(this));this.cancel.bind("click."+b,function(a){a.preventDefault();this.modal.trigger("cancel");this.close()}.bind(this));this.confirm.bind("click."+b,function(a){a.preventDefault();this.modal.trigger("confirm");this.close()}.bind(this));c(document).bind("keyup."+b,function(a){27===a.keyCode&&this.close()}.bind(this));this.overlay.bind("click."+b,function(a){c(a.target).hasClass(b+"-overlay")&&this.close()}.bind(this))};g.prototype.open=function(){this.busy|| (this.busy=!0,this.modal.trigger("open"),this.modal.attr("data-"+b+"-id"),d&&d!==this&&(d.overlay.hide(),d.body.removeClass(b+"_active")),d=this,c("html, body").addClass(b+"_lock"),c(document.body).css("padding-right","+="+h()),this.overlay.show(),setTimeout(function(){this.body.addClass(b+"_active");setTimeout(function(){this.busy=!1;this.modal.trigger("opened")}.bind(this),this.td+50)}.bind(this),25))};g.prototype.close=function(){this.busy||(this.busy=!0,this.modal.trigger("close"),this.settings.hashTracking&& isHashSet()&&(location.hash=""),this.body.removeClass(b+"_active"),setTimeout(function(){this.overlay.hide();c("html, body").removeClass(b+"_lock");c(document.body).css("padding-right","-="+h());this.busy=!1;this.modal.trigger("closed")}.bind(this),this.td+50))};c&&(c.fn[b]=function(a){var e;this.each(function(d,l){var f=c(l);f.data(b)||(e=new g(f,a),f.data(b,e.index),e.settings.hashTracking&&isHashSet()&&e.open())});return e});c(document).on("click","[data-"+b+"-target]",function(a){a.preventDefault(); a=a.currentTarget.getAttribute("data-"+b+"-target");a=c("[data-"+b+"-id="+a+"]");c[b].lookup[a.data(b)].open()});c(document).find("."+b).each(function(a,e){var d=c(e),f=d.data(b+"-options");f||(f={});d[b](f)});c(window).bind("hashchange."+b,function(a,b){var c=!1;isHashSet()&&(c=location.hash.replace("#","").split("-")[0]);"undefined"===typeof b&&(b=!0);c||b&&d&&!d.busy&&d.settings.hashTracking&&d.close()})})(window.jQuery||window.Zepto);$(init); function init(){animateSkills();renderProjects(!0);$("h2").append('<span class="circle"></span>');var a=$("#skill-wrapp div");setTimeout(function(){swapColors(a)},500);a.hover(showSkillTip,hideSkillTip);a.on("click",onSkillClicked);$(document).on("click",".pj-email",appendEmailAddress);$(document).on("click",".pj-asyncload",loadOther);$(document).on("click","form a",sendEmail);$(document).on("click",".pj-project .pj-project-tech, .pj-project-hover",showProjectDetail);$(document).on("mouseleave",".pj-project", hideProjectDescr);$(document).on("mouseenter",".pj-project",showProjectDescr);$(document).on("mouseleave","#gallery a",imageLeave);$(document).on("mouseenter","#gallery a",imageEnter);$(document).on("refreshfilter",refreshSkillFilter);$(document).on("click","#pj-selected-skills div",onRemoveSkillClicked);$('<div class="remodal" data-remodal-id="modal"><article></article></div>').appendTo("body");$(".remodal").remodal();initProjectDetail()} function onSkillClicked(){$(this).toggleClass("pj-selected");$(document).trigger("refreshfilter");return!1}function onRemoveSkillClicked(){var a=$(this).attr("data-id");$("#skill-wrapp").find("[data-id="+a+"]").removeClass("pj-selected");$(document).trigger("refreshfilter");return!1} function refreshSkillFilter(){showLoader();var a={items:getSelectedSkilss(),lang:$("body").attr("data-lang"),act:4};executeRequest(a,function(b){b=$.parseJSON(b);0==b.err&&($("#pj-project-wrapp").html(b.html),renderProjects(!1),b=$(".pj-asyncload"),0===a.items.length?b.removeClass("hidden"):b.addClass("hidden"))});return!1}function getSelectedSkilss(){var a=[];$("#skill-wrapp div.pj-selected").each(function(){a.push($(this).attr("data-id"))});return a} function isOnLeftSide(a){a=a.position();return $(document).outerWidth()/2>a.left?!0:!1}function showProjectDescr(a){a.preventDefault();a=$(this);var b=isOnLeftSide(a);a.addClass(b?"pj-rightside":"pj-leftside");a.removeClass(b?"pj-leftside":"pj-rightside");a.find(".pj-project-tech div").each(function(a){$(this).transition({x:(a+1)*(b?1:-1),delay:10*a}).transition({x:0,delay:10*a})});a.find(".pj-project-hover,.pj-project-tech").show();$(".pj-project").not(a).addClass("pj-transparent");return!1} function hideProjectDescr(){var a=$(this);$(".pj-project").not(a).removeClass("pj-transparent");a.find(".pj-project-hover, .pj-project-tech").hide()}function swapColors(a){a.each(function(){var a=$(this);a.data("color-bg",a.css("background-color"))})}function appendEmailAddress(){$(this).attr("href","mailto:email@peterjurkovic.sk")} function showSkillTip(){var a=$(this),b=a.position(),c=a.width(),e=a.height(),d=a.attr("data-skill");$('<div id="pj-tooltip"></div>').text(d).appendTo("#skill-wrapp").css("min-width",c+"px").css("width",43<c||6>d.length?c+"px":2*c).css("top",(a.hasClass("pj-bottom")?b.top+e:a.hasClass("pj-jquery-mobile")?b.top-51:b.top-30)+"px").css("left",43<c||6>d.length?b.left+"px":b.left-c/2+"px").css("color",a.hasClass("pj-white")?"#fff":a.css("background-color")).css("background-color",a.data("color-bg"));return!1} function hideSkillTip(){$("#pj-tooltip").remove();return!1}function animateSkills(){var a=$(document).outerWidth(),b=$("#skill-wrapp div");660<=a&&b.each(function(b){$(this).transition({x:0===b%2?-1*a-450:a+450,delay:15*b}).transition({y:200}).transition({x:0}).transition({y:0})})}function renderProjects(a){var b=$("#pj-project-wrapp"),c=b.find(".pj-project.hidden");a?(b.fadeOut(),setTimeout(function(){c.removeClass("hidden");b.fadeIn(1E3)},1E3)):c.removeClass("hidden").fadeOut().fadeIn(1E3)} jQuery.fn.center=function(){this.css("position","absolute");this.css("top",($(window).height()-this.outerHeight())/2+$(window).scrollTop()+"px");this.css("left",($(window).width()-this.outerWidth())/2+$(window).scrollLeft()+"px");return this};function showLoader(){$('<div id="pj-loader" class="circle"><p>Loading...</p></div>').center().appendTo("body");return!1}function hideLoader(){$("#pj-loader").remove();return!1} function loadOther(){showLoader();var a={lang:$(this).attr("data-lang"),act:1},b=$(this);executeRequest(a,function(a){a=$.parseJSON(a);0==a.err&&($(".pj-projects").append(a.html),renderProjects(!1),b.addClass("hidden"))});return!1} function sendEmail(){var a=$("form"),b=renameArr(a.serializeArray());if(!isValid(a))return!1;b.act=2;b.lang=$("body").attr("data-lang");executeRequest(b,function(b){b=$.parseJSON(b);0==b.err&&($('<p id="pj-success"></p>').text(b.msg).appendTo("form"),a.find("input, textarea").val(""),setTimeout(function(){$("#pj-success").remove()},4E3))});return!1} function showProjectDetail(){var a=null;1===arguments.length&&(a=parseInt(arguments[0],10));showLoader();var b=$(this),c={id:isNaN(a)?b.parent().attr("data-id"):a,lang:$("body").attr("data-lang"),act:3};setTimeout(function(){executeRequest(c,function(a){a=$.parseJSON(a);0==a.err&&($(".remodal").find("article").html(a.html),isHashSet()||(location.hash="project-"+c.id),getModalBoxInstance().open())})},500);return!1} function executeRequest(a,b){$.ajax({type:"GET",url:"/inc/ajax.php",data:a,contentType:"application/json"}).done(b).fail(function(a,b,d){console.warn("Some error occured.");console.warn(b);console.warn(d)}).complete(function(a){setTimeout(hideLoader,400)})}function getModalBoxInstance(){return $.remodal.lookup[$("[data-remodal-id=modal]").data("remodal")]} function isValid(a){var b=a.find("input, textarea"),c=!0,e={required:function(a,b){return{r:!!a,msg:"All fields are required"}},email:function(a,b){return{r:a.match(/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/),msg:"Invalid email address"}},fiveplus:function(a,b){return{r:5<=a.length,msg:"At least 5 characters"}}};a.find("#pj-errors").remove();b.removeClass("pj-form-error");b.each(function(){var b=$(this),h=b.val(),f=b.attr("class").split(" ");for(i in f)if(e.hasOwnProperty(f[i])){var g=e[f[i]](h,b);g.r|| (0===a.find("#pj-errors").length&&$('<p id="pj-errors"></p>').text(g.msg).appendTo(a),b.addClass("pj-form-error"),c=!1)}});return c}function renameArr(a){var b={};for(i in a)b[a[i].name]=a[i].value;return b}function initProjectDetail(){if(isHashSet()){var a=location.hash.replace("#","").split("-");showProjectDetail(a[1])}}function isHashSet(){return/^#[a-z]{1,10}\-\d{1,3}$/.test(location.hash)}function imageEnter(){$("#gallery").find("a").not($(this)).addClass("pj-transparent");return!1} function imageLeave(){$("#gallery a").removeClass("pj-transparent");return!1};